(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(37)},37:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),o=n.n(a),c=n(14),u=n.n(c),i=n(4),l=n.n(i),s="/api/persons",f=function(){return l.a.get(s).then((function(e){return e.data}))},m=function(e){return l.a.post(s,e).then((function(e){return e.data}))},d=function(e){return l.a.put("".concat(s,"/").concat(e.id),e).then((function(e){return e.data}))},b=function(e){return l.a.delete("".concat(s,"/").concat(e))},h=function(e){return o.a.createElement(o.a.Fragment,null,"".concat(e.person.name," ").concat(e.person.number," "),o.a.createElement("button",{onClick:function(){return e.deleteNumber(e.person)}},"delete"),o.a.createElement("br",null))},p=function(e){var t=Object(r.a)(e.personsState,2),n=t[0],a=t[1],c=function(t){window.confirm("Delete ".concat(t.name," ?"))&&b(t.id).then((function(){return a(n.filter((function(e){return e.id!==t.id})))})).catch((function(){return n="Information of ".concat(t.name," has already been removed from server"),e.setNotificationMessage({isError:!0,text:n}),void setTimeout((function(){return e.setNotificationMessage(null)}),3e3);var n}))},u=function(){if(e.searchField.length>0){var t=e.searchField.toLowerCase();return n.filter((function(e){return e.name.toLowerCase().includes(t)}))}return n}().map((function(e){return o.a.createElement(h,{key:e.name,person:e,deleteNumber:c})}));return o.a.createElement(o.a.Fragment,null,u)},g=n(3),E=function(e){var t=Object(r.a)(e.personsState,2),n=t[0],a=t[1],c=Object(r.a)(e.newNameState,2),u=c[0],i=c[1],l=Object(r.a)(e.newNumberState,2),s=l[0],f=l[1],b=function(t,n){e.setNotificationMessage({isError:t,text:n}),setTimeout((function(){return e.setNotificationMessage(null)}),3e3)};return o.a.createElement(o.a.Fragment,null,o.a.createElement("form",null,o.a.createElement("div",null,"name:"," ",o.a.createElement("input",{onChange:function(e){return i(e.target.value)}})),o.a.createElement("div",null,"number:"," ",o.a.createElement("input",{onChange:function(e){return f(e.target.value)}})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault();var t=n.find((function(e){return e.name===u}));if(void 0===t){var r={name:u,number:s};m(r).then((function(e){return b(!1,"Added ".concat(e.name)),e})).then((function(e){return n.concat(e)})).then((function(e){return a(e)})).catch((function(){return b(!0,"Couldn't add ".concat(r.name))}))}else{var o="".concat(u," is already added to phonebook, replace the old number with a new one?");if(window.confirm(o)){var c=Object(g.a)({},t,{number:s});d(c).then((function(e){return b(!1,"Modified ".concat(e.name)),e})).then((function(e){return n.map((function(t){return t.id===e.id?c:t}))})).then((function(e){return a(e)})).catch((function(){return b(!0,"Couldn't modify ".concat(c.name))}))}}}},"add"))))},v=function(e){return o.a.createElement("div",null,"filter shown with"," ",o.a.createElement("input",{onChange:function(t){return e.setSearchField(t.target.value)}}))},w=function(e){if(null===e.notificationMessage)return null;var t={background:"LightGray",marginBottom:"0.5em",border:3,borderStyle:"solid",borderRadius:5,fontSize:21,paddingLeft:"0.5em",paddingTop:"0.5em",paddingBottom:"0.5em"},n=Object(g.a)({},t,{borderColor:"green",color:"green"}),r=Object(g.a)({},t,{borderColor:"red",color:"red"}),a=e.notificationMessage.isError?r:n;return o.a.createElement("div",{style:a},e.notificationMessage.text)};u.a.render(o.a.createElement((function(){var e=Object(a.useState)([]),t=Object(a.useState)(""),n=Object(a.useState)(""),c=Object(a.useState)(null),u=Object(r.a)(c,2),i=u[0],l=u[1],s=Object(a.useState)(""),m=Object(r.a)(s,2),d=m[0],b=m[1],h=e[1];return Object(a.useEffect)((function(){f().then((function(e){return h(e)}))}),[h]),o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(w,{notificationMessage:i}),o.a.createElement(v,{setSearchField:b}),o.a.createElement("h3",null,"add a new"),o.a.createElement(E,{personsState:e,newNameState:t,newNumberState:n,setNotificationMessage:l}),o.a.createElement("h3",null,"Numbers"),o.a.createElement(p,{personsState:e,searchField:d,setNotificationMessage:l}))}),null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.eb8f6218.chunk.js.map